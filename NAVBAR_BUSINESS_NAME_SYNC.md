# โ ุฑุจุท ุงุณู ุงูููุดุฃุฉ ูุน ุงูู Navbar (ุงูุจูุฑ ุงูุนููู)

## ๐ฏ ุงููุฏู:
ุฌุนู ุงุณู ุงูููุดุฃุฉ ูู ุงูู Navbar ุฏููุงููููุงู ูุชุญุฏุซ ุชููุงุฆูุงู ุนูุฏ ุชุบููุฑู ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช.

---

## ๐ ุงูุชุบููุฑุงุช ุงููุทุจูุฉ:

### **components/Navbar.tsx**

#### 1๏ธโฃ ุฅุถุงูุฉ Imports:
```typescript
import React, { useState, useEffect } from 'react';
```

#### 2๏ธโฃ ุฅุถุงูุฉ State:
```typescript
const [businessName, setBusinessName] = useState('ูุฏููุฉ ุงูุฃูุนุงุจ ุงูุชุฑููููุฉ');
```
- ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ: "ูุฏููุฉ ุงูุฃูุนุงุจ ุงูุชุฑููููุฉ"
- ุชุชุญุฏุซ ุนูุฏ ุฌูุจ ุงูุจูุงูุงุช ูู API

#### 3๏ธโฃ ุฅุถุงูุฉ useEffect ูุฌูุจ ุงูุจูุงูุงุช:
```typescript
useEffect(() => {
  const fetchSettings = async () => {
    try {
      const response = await fetch('/api/settings');
      if (response.ok) {
        const data = await response.json();
        if (data.settings.businessName) {
          setBusinessName(data.settings.businessName.value);
        }
      }
    } catch (error) {
      console.error('Error fetching business name:', error);
    }
  };

  fetchSettings();
  
  // Re-fetch when navigating (to update after settings change)
  const handleFocus = () => fetchSettings();
  window.addEventListener('focus', handleFocus);
  
  return () => window.removeEventListener('focus', handleFocus);
}, [pathname]);
```

**ุดุฑุญ:**
- ูุฌูุจ ุงูุจูุงูุงุช ุนูุฏ ุชุญููู ุงูุตูุญุฉ
- **ูุนูุฏ ุฌูุจ ุงูุจูุงูุงุช ุนูุฏ ุงูุชููู ุจูู ุงูุตูุญุงุช** (`pathname` dependency)
- **ูุนูุฏ ุฌูุจ ุงูุจูุงูุงุช ุนูุฏ focus ุนูู ุงููุงูุฐุฉ** (window focus event)
- ููุธู event listener ุนูุฏ unmount

#### 4๏ธโฃ ุงุณุชุฎุฏุงู ุงููุชุบูุฑ ุงูุฏููุงูููู:
```typescript
// โ ูู:
<h1 className="text-xl font-bold text-primary-600">
  ูุฏููุฉ ุงูุฃูุนุงุจ ุงูุชุฑููููุฉ
</h1>

// โ ุฅูู:
<h1 className="text-xl font-bold text-primary-600">
  {businessName}
</h1>
```

---

## ๐ ููู ูุนูู ุงูุชุญุฏูุซ ุงูุชููุงุฆู:

### ุงูุณููุงุฑูู 1: ุนูุฏ ุชุญููู ุงูุตูุญุฉ
1. ุงููุณุชุฎุฏู ููุชุญ ุงูุชุทุจูู
2. ุงูู Navbar ููุญููู
3. `useEffect` ูููุฐ ุชููุงุฆูุงู
4. ูุฌูุจ ุงุณู ุงูููุดุฃุฉ ูู `/api/settings`
5. ูุญุฏุซ `businessName` state
6. ุงูู Navbar ูุนุฑุถ ุงูุงุณู ุงูุฌุฏูุฏ

### ุงูุณููุงุฑูู 2: ุนูุฏ ุชุบููุฑ ุงูุฅุนุฏุงุฏุงุช
1. ุงููุฏูุฑ ููุชุญ ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช
2. ูุบูุฑ ุงุณู ุงูููุดุฃุฉ
3. ูุถุบุท "ุญูุธ"
4. ุงูุจูุงูุงุช ุชูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
5. ุงููุฏูุฑ ููุชูู ูุตูุญุฉ ุฃุฎุฑู (Dashboardุ ุงูุชูุงุฑูุฑุ ุฅูุฎ)
6. **`pathname` ูุชุบูุฑ**
7. `useEffect` ูููุฐ ูุฑุฉ ุฃุฎุฑู
8. ูุฌูุจ ุงูุงุณู ุงูุฌุฏูุฏ
9. ุงูู Navbar ูุชุญุฏุซ ุชููุงุฆูุงู โ

### ุงูุณููุงุฑูู 3: ุนูุฏ ุงูุนูุฏุฉ ููุชุทุจูู
1. ุงููุณุชุฎุฏู ููุชุญ ุชุจููุจ ุขุฎุฑ
2. ูุนูุฏ ููุชุทุจูู
3. **`window focus` event ููุทูู**
4. `useEffect` ูุฌูุจ ุงูุจูุงูุงุช ูุฑุฉ ุฃุฎุฑู
5. ุงูู Navbar ูุชุญุฏุซ ุฅุฐุง ูุงู ููุงู ุชุบููุฑ โ

---

## โ ุงููุชูุฌุฉ:

ุงูุขู:
- โ **ุงุณู ุงูููุดุฃุฉ ูู ุงูู Navbar ุฏููุงูููู**
- โ **ูุชุญุฏุซ ุชููุงุฆูุงู ุนูุฏ ุงูุชููู ุจูู ุงูุตูุญุงุช**
- โ **ูุชุญุฏุซ ุนูุฏ ุชุบููุฑ ุงูุฅุนุฏุงุฏุงุช**
- โ **ูุชุญุฏุซ ุนูุฏ focus ุนูู ุงููุงูุฐุฉ**
- โ **ูุง ุญุงุฌุฉ ูุชุญุฏูุซ ุงูุตูุญุฉ ูุฏููุงู**

---

## ๐ ุงุฎุชุจุงุฑ ุงูููุฒุฉ:

### 1๏ธโฃ ุชุณุฌูู ุงูุฏุฎูู ููุฏูุฑ:
```
ุงุณู ุงููุณุชุฎุฏู: admin
ูููุฉ ุงููุฑูุฑ: admin
```

### 2๏ธโฃ ุงูุชูู ุฅูู ุงูุฅุนุฏุงุฏุงุช:
- ุงููุฑ ุนูู "ุงูุฅุนุฏุงุฏุงุช" ูู ุงูู Navbar

### 3๏ธโฃ ุบููุฑ ุงุณู ุงูููุดุฃุฉ:
- ุงูุชุจ ุงุณู ุฌุฏูุฏ ูู ุญูู "ุงุณู ุงูููุดุฃุฉ"
- ูุซุงู: "ุตุงูุฉ ุงูุชุฑููู ุงูุฑูุงุถูุฉ"
- ุงุถุบุท "ุญูุธ ุงูุฅุนุฏุงุฏุงุช"

### 4๏ธโฃ ุงูุชูู ูุตูุญุฉ ุฃุฎุฑู:
- ุงููุฑ ุนูู "ุงูุฑุฆูุณูุฉ" ุฃู "ุงูุชูุฑูุฑ ุงููููู"
- **ูุงุญุธ ุฃู ุงุณู ุงูููุดุฃุฉ ูู ุงูู Navbar ุชุญุฏูุซ ุชููุงุฆูุงู!** โ

### 5๏ธโฃ ุงูุชุญ ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช ูุฑุฉ ุฃุฎุฑู:
- **ุงูุงุณู ุงูุฌุฏูุฏ ููุฌูุฏ ูู ุฌููุน ุงูุตูุญุงุช** โ

---

## ๐ ุงูุฃูุงูู ุงูุชู ูุธูุฑ ูููุง ุงุณู ุงูููุดุฃุฉ ุงูุขู:

1. โ **Navbar (ุงูุจูุฑ ุงูุนููู)** - ุฏููุงูููู
2. โ **Dashboard** - ุฏููุงูููู
3. โ **ุงููุตู ุงููุทุจูุน** - ุฏููุงูููู
4. โ **ุงูุชูุฑูุฑ ุงููููู (PDF)** - ุฏููุงูููู
5. โ **ุงูุชูุฑูุฑ ุงูุดูุฑู (PDF)** - ุฏููุงูููู
6. โ **ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช** - ุฏููุงูููู

---

## ๐ก ููุงุญุธุงุช ุชูููุฉ:

### ููุงุฐุง `pathname` ูู dependenciesุ
```typescript
}, [pathname]);
```
- ูุถูู ุฅุนุงุฏุฉ ุฌูุจ ุงูุจูุงูุงุช ุนูุฏ ุงูุชููู
- ุจุฏูููุ ุงูุงุณู ูู ูุชุญุฏุซ ุฅูุง ุนูุฏ ุชุญุฏูุซ ุงูุตูุญุฉ

### ููุงุฐุง `window focus` eventุ
```typescript
window.addEventListener('focus', handleFocus);
```
- ูููุฏ ุนูุฏ ุงูุนูู ูู ุจูุฆุฉ multi-tab
- ุฃู ุนูุฏ ุงูุนูุฏุฉ ูู ุชุทุจูู ุขุฎุฑ
- ูุถูู ุฃู ุงูุจูุงูุงุช ุฏุงุฆูุงู ูุญุฏุซุฉ

### ููุงุฐุง cleanup functionุ
```typescript
return () => window.removeEventListener('focus', handleFocus);
```
- ูููุน memory leaks
- ูุฒูู event listener ุนูุฏ unmount ุงูู component

---

## ๐ ุชู ุจูุฌุงุญ!

ุงุณู ุงูููุดุฃุฉ ุงูุขู:
- ๐ฑ **ูุชุฒุงูู ูู ุฌููุน ุงูุตูุญุงุช**
- ๐ **ูุชุญุฏุซ ุชููุงุฆูุงู**
- โก **ุจุฏูู ุชุญุฏูุซ ูุฏูู**
- ๐ฏ **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ**

---

## ๐ ุงููุฒูุฏ ูู ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ (ุงุฎุชูุงุฑู):

### 1. ุงุณุชุฎุฏุงู Context API:
```typescript
// BusinessNameContext.tsx
const BusinessNameContext = createContext();

// ููุณุชุฎุฏู ูู ุฌููุน ุงูุตูุญุงุช
const { businessName, updateBusinessName } = useBusinessName();
```

### 2. ุงุณุชุฎุฏุงู Custom Event:
```typescript
// ุนูุฏ ุงูุญูุธ ูู ุตูุญุฉ Settings
window.dispatchEvent(new CustomEvent('businessNameChanged', { 
  detail: { businessName: newName } 
}));

// ูู Navbar
window.addEventListener('businessNameChanged', handleBusinessNameChange);
```

### 3. ุงุณุชุฎุฏุงู State Management (Zustand/Redux):
```typescript
// store.ts
const useStore = create((set) => ({
  businessName: '',
  setBusinessName: (name) => set({ businessName: name }),
}));
```

**ููู ุงูุญู ุงูุญุงูู ุจุณูุท ููุนุงู ููุนูู ุจุดูู ููุชุงุฒ!** โ

